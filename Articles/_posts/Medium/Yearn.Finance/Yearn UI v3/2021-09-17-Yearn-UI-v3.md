---
layout: post
title:  "Yearn UI v3.0"
categories: [ Articles ]
image: ./Yearn-UI-v3/image1.png
author: Dudesahn
translator: Cripu
publish: true
---

# Yearn UI v3.0

### Yearn.Financeの次となるUIがこちらです

![](image1.png)

_v3レンディングページのデザイン探究_

私たちはyearn.financeを一から作り直しました。v2からのフィードバックと弱点に対応し、さらに**多くのこと**を行いました。
v3は、ユーザー体験、コンポーザビリティ、そしてマルチチェーンの未来を念頭に置いて構築されており、ベータ版を現在公開中です。[beta.yearn.finance](http://beta.yearn.finance)。

## ビジョンの実現

![](image2.png)

_v3デザイン探究_

1月にyearn.Finance v2をリリースしてから数ヶ月後、Yearnのコントリビューターたちは進化し続けるDeFiに対応した完全な機能を備えたスケーラブルなシステムを目指して大幅な書き換えを開始しました。

本日、このビジョンがついに実現し、ゼロから再構築された新しいv3ベータ版がユーザーとコントリビューターの両方にリリースされました。

私たちはコミュニティからのフィードバックに注意深く耳を傾け、最も切実な問題点に対処しました。さらに、今回の書き換えはそれだけに留まらず、ユーザー体験を大幅に向上させ最初から最後までのプロセスをシンプルにするための様々な追加機能を備えています。

## 主要な改善点

-   これからはポジションの合計、過去の収益の合計、年間の予測収益を確認することができます。Vaultsの預金額は、原資産のトークンと$ドル建ての両方で表示されています。
-   インターフェースを介したあらゆる取引（vaultsへのザップイン/アウトを含む）は[Tenderly](https://tenderly.co)を使ってシミュレーションされ、受け取ったトークンの推定値が表示されます。予期せぬスリップや不可解なトランザクションの失敗はもうありません。
-   ウォレットページでは、保有しているほとんどのトークンを簡単にvaultsにザップイン（入金）したり、Iron Bankに供給したりすることができます。
-   vaultの詳細ページには、vaultの過去の収益、基礎となるトークンの情報、ストラテジーの説明が表示されています。
-   より実験的なvaultのためのホームとして「ラボ」セクションを新設しました。
-   Iron Bankが完全に統合され、端数のないローンの返済や引き出しが可能になりました。
-   モバイル向けにデザインを一新しました。
-   複数のUIテーマが用意されており、Yearn NFTホルダー向けのアンロックテーマも近日公開予定です。スクリーンショットでは、サイバーパンクのテーマが使用されています。

注意：このリリースは**ベータ版**であり、まだ最終的なものではありません。今後数週間、フィードバックを受けながら改良を重ねていく予定です。フィードバックの提供をご希望の方は、v3ウェブUIのフィードバック用に作られた新しい[discordチャンネル](https://discord.gg/Rw9zA3GbyE)にお越しください。

![](image3.png)

_v3デザイン探究_

## 待って、これはどこのサイトだった？

これは、Yearnのコントリビューターグループによって運営されている新しいyearn.financeです。[yearn.fi](https://yearn.fi/)は、[Andre](https://twitter.com/AndreCronjeTech)と[Anton](https://twitter.com/AntonNellCrypto)が中心となって運営しているサイトです。

両サイトは補完関係にあります。Antonは私たちが追加する機能（SDKなど）を実装し、私たちはAndreとAntonがリリースする新機能（リスク/プロトコルダッシュボードなど）を追加する予定です。

ベータ版のリリースを**深く掘り下げる**には、以下をお読みください（特にB2Bや潜在的なインテグレーターに役立ちます）。また、最後に今後のロードマップをご紹介します。

## Yearnのwebインフラ

私たちの新しいv3フロントエンドとバックエンドはスケーラビリティとコンポーザビリティを考慮して設計されており、複数の異なるコンポーネントに分けられます。**Lens, Meta, Subgraph, Exporter, SDK, Front-end**です。

以下にそれぞれのコンポーネントについて簡単に説明します。

### Lens

![](image4.png)

_Lensのブロッックダイアグラム_

Yearnのlensは、チェーン上のデータを集約して簡単に消費できるようにするコントラクト群です。lensには、オラクル、レジストリー、アドレスジェネレータ、アダプタ、ヘルパーコントラクトが含まれています。lensのコントラクトは設定可能（計算を個別に追加／更新できる）、すべてのアダプタは拡張可能、すべてのストレージ変数は更新可能です。lensは、資産やプロトコルごとに任意のユーザにスコープされた情報、特定のvaultやIron Bank市場にスコープされた情報、およびプロトコル全体にスコープされた情報を提供します。

#### ユースケース

Yearnのlensの重要なユースケースとしては、Yearnプロトコル全体のオンチェーンのユーザー残高、vault残高、TVL（すべてオンチェーンのオラクルを介してUSDCに正規化されています）などがあります。つまり、lensはYearnのデータをオンチェーンで素早く取得したいと考えるプロトコルやパートナーにとって、シンプルな統合ポイントとなります。

[Lensのソースコード](https://github.com/yearn/yearn-lens/)

### Meta

Yearnのmetadata repoはシンプルなフレームワークであり、フロントエンドのvaultの設定をコードの編集を必要とすることなく非常に素早く調整することができます。Yearnのチームメンバーは、JSONファイルを編集するだけで更新されたIPFSメタデータファイルを自動的にビルドしてデプロイすることができます。

#### 現在サポートされているスキーマと機能は以下の通りです ：

-   UIからVaultを隠す
-   vaultの入金/出金やザップイン/アウトの無効化
-   新しいバージョンへの移行が可能なVaultがあるかどうかを示す
-   APY値の上書き
-   ストラテジーの名称と内容
-   vaultのシンボル、名前、またはトークンのアイコンを上書き
-   基礎となるトークンのシンボル、名前、またはアイコンの上書き

#### ユースケース

-   プログラマーじゃなくてもvaultのさまざまな側面を素早く設定できます（ただし、PRの審査が必要）。
-   設定を一か所で編集するとすべてのインテグレータが更新されます。
-   トークンやvaultの名称、アイコン、シンボルを管理します。

[Metaソースコード](https://github.com/yearn/yearn-meta)

### Subgraph

![](image5.png)

_ダッシュボードと各vaultに収益を表示_

Yearnのsubgrapの主なユースケースは、過去のオンチェーンデータを集約・変換し、簡単にクエリできるようにすることです。上の画像にあるように、現在subgrapは表示に使われています。

-   ユーザーのvaultにスコープされた過去の収益
-   ユーザーの全体的な過去の収益
-   vaultの過去の収益（vaultの詳細ページに記載されます）

各vaultの収益はコントラクトレベルではネイティブに統合されていないので、subgrapを使って入金、出金、ハーベストのイベントを追跡し、収益が[計算]できるように集約します(https://github.com/yearn/yearn-sdk/blob/master/src/interfaces/earnings.ts)。

Yearnのエコシステムは本質的に複雑なため、大量の正確なデータを提供するサブグラフを持つことは困難です。他のウェブサイトと同様にコードはオープンソースなので、もし収益に問題がある場合は、お気軽にご連絡いただくか下記のsubgraphのリポジトリにPRをご提出ください。

[Subgraphソースコード](https://github.com/yearn/yearn-vaults-v2-subgraph/)

### Exporter

Yearn exporterはYearnの主要APIとして機能し、すべてのAPYとTVLの計算を含んでいます。このAPIはオンチェーンデータのみに依存しており、誰もがYearnプロダクトの測定可能なあらゆる側面を許可なく検証できるツールを提供しています。エクスポーターは、リアルタイムデータとヒストリカルデータの両方のエクスポートをサポートしています。

[Exporterソースコード](https://github.com/yearn/yearn-exporter)

### SDK

![](image6.png)

_SDKブロックダイアグラム_

Yearnの新しいSDKはYearnの新しいv3ウェブサイトを動かすエンジンであり、フロントエンドはSDKからデータを消費することを中心に設計されています。SDKは、レンズ、エクスポーター、サブグラフ、メタ、そして[Zapper](https://zapper.fi)からデータを取得することでオンチェーンとオフチェーンのデータを集約し、フロントエンドやB2Bインテグレーションに提供します。

#### ユースケース

-   V3のフロントエンド
-   B2Bインテグレーター：vaultの管理と設定はインテグレーターのために行われます。YearnのSDKが取得するデータが更新されると、インテグレーターにも自動的に対応します。
-   ストラテジスト用ダッシュボード

[SDKソースコード](https://github.com/yearn/yearn-sdk)

### Front-end

上記のバックエンドインフラが必要なデータを生成する一方で、フロントエンドはそのデータを消費し、ユーザーが簡単に操作できるように提示します。

![](image7.png)

_v3フロントエンドブロックダイアグラム_

フロントエンドのコードは、2つの異なる部分に分かれています。**v3コアロジック**と**UIレイヤー**です。

**v3コアロジック**は、どのレポにも簡単に実装できるようになっており、データの取得だけでなくPOST/WRITEリクエストを行うことでSDKや他の外部データプロバイダとの通信を担当しています。また、コア・ロジックはより適切で伝統的なデータ・スキーマをモデル化してUIに供給し、すべての異なるデータ（vault、トークン、ユーザー・バランスなど）を組み合わせます。

**UIレイヤー**はコアから直接データを消費し、各レポで必要に応じて表示します。これは以下で説明された5つのメインページに分けられます。

[Front-endソースコード](https://github.com/yearn/yearn-finance-v3)

![](image8.png)

_サイドナビとダッシュボードのクローズアップ_

#### Home

ホームページには、ウォレットに入っているすべての資産の概要と、Yearnの3つのプロダクトカテゴリーがすべて表示されています。Vaults、ラボ、Iron Bankです。

#### Wallet

ウォレットでは、ウォレット内のすべての資産とその合計金額が表示されています。また、任意のvaultに預けたり、マーケットが利用可能な場合はIron Bankにトークンを供給することができます。

#### Vaults

新しいvaultページでは、vaultへのデポジットに関するユーザー情報、おすすめのvault（現在は最も利回りの高いvaultが表示されています）、基礎となるトークンの残高、ドル建てバリュー、vaultへのデポジットに関する過去の収益、現在のAPYがダッシュボードに表示されます。各vaultをクリックするとvaultの詳細ページが表示されます。

#### Vault詳細ページ

![](image9.png)

_Vault詳細ページ_

vaultの詳細ページは各vault固有のURL（ラボには近日公開予定）となっており、vaultのTVL、APY、原資産であるトークン情報、ストラテジーの説明、vaultの過去の収益が表示され、ユーザーは入金・出金が可能です。

#### Labs

ユーザーの皆様がお気づきになる点は、「yveCRV」「yvBOOST」そして「yvBOOST-ETH pJar」（[pickle.finance](https://www.pickle.finance)とのコラボレーションで発売されたプロダクト）がvaultsページから消えていることです。代わりに、これらはすべて新しいラボセクションに移動しました。

ラボってなに、とお尋ねですか？

Yearnのvaultsは当初、「up-only」でユーザーがいつでも出金可能というアイディアでつくられました。Yearnのストラテジーがより洗練され利回りを生み出す新たな方法を模索していくうちに、多くのストラテジーがこの特定のフレームワークに適していないことに気づきました。

例えば、複数のストラテジストがシングルサイドLP戦略に取り組んでいます。トレード手数料とステーキングのインセンティブにより、AMMのLPでの資金の利回りは非常に有利です。しかし、市場の変動によってはインパーマネントロスや短期的なドローダウンのリスクがあることは明らかです。

また、Bancorのようなプロトコルでは資金をアンステークするために24時間のクールダウン期間が必要になる場合があります。以前は、このような要件があるとvaultの「いつでも出金可能」という特徴が崩れることになりました。

ラボではより柔軟性を持たせています。ユーザーが事前に条件を理解していれば、長期的に持続可能な利回りの向上を追求するためにロックアップや一時的な損失の可能性を許容するストラテジーをとることができます。

#### Iron Bank

vaultsやラボと同様に、Iron Bankでは供給総額、借入総額、使用した借入限度額、借入限度額の合計などの関連情報がダッシュボードに表示されます。

### 追加機能

![](image10.png)

_スリップ許容量を超えたザップのシミュレーション_

#### シミュレーション

入金、出金、valutへのザップの前に、[**Tenderly**](https://tenderly.co/)**を使用してトランザクションをシミュレートします。** これによりユーザーがトランザクションを送信してガスの使用をコミットする前に、多くの有益な情報を得ることができます。

-   シミュレーションが成功すれば、受け取るトークンの枚数を大まかに把握することができます。
-   ユーザーの許容範囲（ザップの場合）を超えるスリッページが発生することがシミュレートされた場合、実際のスリッページがどの程度になるのかユーザーに警告が表示されます。
-   トランザクションのシミュレーションが失敗するとユーザーに警告が表示されます。

トランザクションをシミュレートするためには、まず[Zapper's API](https://docs.zapper.fi/zapper-api/api-guides/zap-in#check-zap-allowance)をコールしてユーザーがザップを承認する必要があるかどうかを確認する必要があります。承認が必要な場合はTenderlyフォークを作成し、シミュレーション間で状態を保持できるようにします。次に、再びZapperを使用して承認トランザクションのシミュレーションを行い、承認のためにシミュレーションする必要のあるトランザクション・データを取得します。承認シミュレーションが成功した後、実際のZapのトランザクションデータを[フェッチ](https://docs.zapper.fi/zapper-api/api-guides/zap-in#zap-in)し、別のシミュレーションを実行します。最終的にはユーザーの承認を必要とせずに、ザップに関する完全にシミュレーションされたデータを見ることができるようになります。

十分な量のガスがない取引をシミュレーションしようとするとシミュレーションは失敗します。ご注意ください。十分なテストを行っていますが、シミュレーションは複雑な動作となっています。問題やシミュレーションの失敗があった場合は、フィードバックをお願いします。

#### モバイル

![](image11.png)

_v3モバイル体験_

また、新しいWebサイトでは、これまで不足していたモバイルへの完全対応も重要な要件でした。

このウェブサイトではフルサイズの画面とモバイル画面の両方からすべての情報を表示することができます。これには、ユーザーダッシュボード、検索機能、すべてのアクションボタン（入金、出金、供給、借入）、APY情報、モバイルレイアウトを考慮して特別にデザインされたトランザクションモーダルなどが含まれます。

現在、App Storeの制限によりYearnのネイティブアプリはありませんが、モバイルブラウザ上でネイティブに近い体験を提供することを約束しています。

## 将来のロードマップ

![](image12.png)

_v3デザイン探究_

### マージ

イーサリアムのPoWとPoSのマージほど劇的ではありませんが、v3 webをベータ版として立ち上げた目的は、既存のウェブUIを置き換える前に完全な機能のパリティを確立することでした。ベータ版では、一般の方からのフィードバックやバグの修正に加えて、現在実装中の項目をいくつかご紹介します。

-   ラボページの詳細ビュー
-   ツールチップのホバー表示をv2に合わせる（APY、ヘッダーなど）

### … そしてその先へ (マージ後)

-   オンボーディングを改善した新しいレンディングページ — **この記事に掲載されているスケッチはv3のデザイン探求から生まれた作品の一部です。**
-   vaultsの過去のAPY
-   過去のプロトコルの収率とユーザーのガス節約
-   ガスコストの少ないザップアウトの承認
-   ガス料金の見積もり
-   多言語サポート
-   [yearn.fi](http://yearn.fi/)のリスクダッシュボードの統合
-   [Bowswap](https://bowswap.finance/)の統合により、低利回りのvaultから高利回りのvaultへの移動が簡単に
-   カスタムスキンの追加機能
-   ホーム画面でのユーザーポジション情報の詳細表示
-   ウォレットページでの端数の非表示機能
-   その他にもまだ発表できないものがいくつかありますが、近日中に公開する予定です。👻

## 感謝の気持ちを込めて

![](image13.png)

_Yearnウェブチームのセルフポートレート_

これらのアップデートは、過去数ヶ月の間にフィードバックやアイデアを提出してくださった何十人もの方々、ウェブアドバイザーグループ、Yearnのすべてのコントリビューター、そして特にこの新しいサイトを実現するために休むことなく働いてくれたデザイナーとエンジニア（その多くは上のアートワークに描かれています）を含む、素晴らしいYearnコミュニティなしには実現できません。

もしあなたが何らかの形でコントリビュートしたいと思うなら、私たちのパブリックな[discord](https://discord.gg/8rF374XkXy)に参加したり、上記のリンク先にある[repos](https://github.com/yearn)でissueを作成したり、[twitter](https://twitter.com/iearnfinance)であなたのデザインを共有したりなど、いつでもお待ちしております！
